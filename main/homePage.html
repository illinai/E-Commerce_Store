<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Home Page</title>
  <link rel="stylesheet" href="css/homePage.css" />
</head>

<body>
  <!-- Title Header Section -->
  <header class="header1">
    <div id="container">
      <div id="shopName">
        <h1>The Maker's Market</h1>
      </div>
    </div>
  </header>

  <!-- Navigation Header Section -->
  <header class="header2">
    <!-- Menu -->
    <div class="menuTab">
      <button class="menu-button" onclick="toggleMenu()">
        <img src="icons/menu.png" alt="Menu" />
      </button>
      <div id="sidebar" class="menu-content">
        <button class="close-menu" onclick="toggleMenu()">Ã—</button>
        <a href="homePage.html">Home</a>
        <a href="wishlist.html">Wishlist</a>
        <a href="cart.html">Cart</a>
        <a href="orders.html">Orders</a>
        <a href="reviews.html">Reviews</a>
        <a href="profile.html">Profile</a>
        <a href="logout.html">Logout</a>
      </div>
    </div>

    <!-- Search Bar -->
    <div class="search-bar">
      <input type="text" id="searchInput" placeholder="Search by name..." />
    </div>

    <!-- Right Buttons -->
    <div class="right-buttons">
      <button class="liked-button">
        <a href="wishlist.html"><img src="icons/liked.png" alt="Likes" /></a>
      </button>
      <button class="cart-button">
        <a href="cart.html"><img src="icons/cart.png" alt="Cart" /></a>
      </button>
      <button id="profileButton" class="profile-button" onclick="toggleProfile()">
        <img src="icons/profile.png" alt="Profile" />
      </button>
      <div id="profileOpt" class="profileTab">
        <div class="profile-content">
          <a href="index.html">Sign In</a>
          <a href="register.html">Register</a>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Banner -->
  <div class="main">
    <section id="banner">
      <div class="banner">
        <img src="imgs/banner3.png" alt="Banner" />
      </div>
    </section>

    <!-- Filter Bar -->
    <section class="filter-bar">
      <select id="categoryFilter">
        <option value="">All Categories</option>
        <option value="Jewelry">Jewelry</option>
        <option value="Home">Home</option>
        <option value="Art">Art</option>
      </select>

      <input type="text" id="tagFilter" placeholder="Search by tag" />
      <input type="number" id="minPrice" placeholder="Min Price" />
      <input type="number" id="maxPrice" placeholder="Max Price" />
    </section>

    <!-- Product Listings -->
    <section class="product-list">
      <h2>Available Products</h2>
      <div class="products" id="products-container">
        <!-- Dynamic product cards will be injected here -->
      </div>
    </section>
  </div>

  <!-- Footer -->
  <footer>
    <nav>
      <a href="#">Stuff</a>
      <a href="#">Stuff</a>
      <a href="#">Stuff</a>
      <a href="#">Stuff</a>
    </nav>
  </footer>

  <!-- JavaScript -->
  <script>
    const products = [
      {
        id: 1,
        name: "Handmade Earrings",
        price: 25,
        category: "Jewelry",
        tags: ["handmade", "accessory"],
        image: "imgs/earrings.jpg"
      },
      {
        id: 2,
        name: "Wooden Home Decor",
        price: 40,
        category: "Home",
        tags: ["wood", "decor"],
        image: "imgs/home-decor.jpg"
      },
      {
        id: 3,
        name: "Custom Art Print",
        price: 30,
        category: "Art",
        tags: ["print", "custom"],
        image: "imgs/art.jpg"
      }
    ];

    document.addEventListener("DOMContentLoaded", () => {
      const container = document.getElementById("products-container");
      const searchInput = document.getElementById("searchInput");

      function renderProducts(filteredProducts) {
        container.innerHTML = "";
        if (filteredProducts.length === 0) {
          container.innerHTML = "<p>No products found.</p>";
          return;
        }

        filteredProducts.forEach(product => {
          const card = document.createElement("div");
          card.className = "product-card";
          card.innerHTML = `
            <img src="${product.image}" alt="${product.name}">
            <h3 class="product-name">${product.name}</h3>
            <p class="product-price">$${product.price}</p>
            <button onclick="addToCart(${product.id})">Add to Cart</button>
          `;
          container.appendChild(card);
        });
      }

      function applyFilters() {
        const searchKeyword = searchInput.value.toLowerCase();
        const selectedCategory = document.getElementById("categoryFilter").value;
        const tagKeyword = document.getElementById("tagFilter").value.toLowerCase();
        const minPrice = parseFloat(document.getElementById("minPrice").value) || 0;
        const maxPrice = parseFloat(document.getElementById("maxPrice").value) || Infinity;

        const filtered = products.filter(p => {
          const matchesSearch = p.name.toLowerCase().includes(searchKeyword);
          const matchesCategory = !selectedCategory || p.category === selectedCategory;
          const matchesTag = !tagKeyword || p.tags.some(tag => tag.toLowerCase().includes(tagKeyword));
          const matchesPrice = p.price >= minPrice && p.price <= maxPrice;
          return matchesSearch && matchesCategory && matchesTag && matchesPrice;
        });

        renderProducts(filtered);
      }

      // Initialize product list
      renderProducts(products);

      // Event listeners for filters
      searchInput.addEventListener("input", applyFilters);
      document.getElementById("categoryFilter").addEventListener("change", applyFilters);
      document.getElementById("tagFilter").addEventListener("input", applyFilters);
      document.getElementById("minPrice").addEventListener("input", applyFilters);
      document.getElementById("maxPrice").addEventListener("input", applyFilters);

      // Add to cart function
      window.addToCart = (productId) => {
        const product = products.find(p => p.id === productId);
        if (!product) return;

        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        const existingItem = cart.find(item => item.id === productId);
        if (existingItem) {
          existingItem.quantity += 1;
        } else {
          cart.push({ ...product, quantity: 1 });
        }
        localStorage.setItem("cart", JSON.stringify(cart));
        alert(`${product.name} added to cart!`);
      };

      // Toggle sidebar menu
      window.toggleMenu = () => {
        const sidebar = document.getElementById("sidebar");
        sidebar.style.left = sidebar.style.left === "0px" ? "-250px" : "0px";
      };

      // Toggle profile dropdown
      window.toggleProfile = () => {
        const dropdown = document.getElementById("profileOpt");
        dropdown.style.display = dropdown.style.display === "flex" ? "none" : "flex";
      };

      document.addEventListener("click", (e) => {
        const dropdown = document.getElementById("profileOpt");
        const profileBtn = document.getElementById("profileButton");
        if (!dropdown.contains(e.target) && !profileBtn.contains(e.target)) {
          dropdown.style.display = "none";
        }
      });
    });
  </script>
</body>
</html>